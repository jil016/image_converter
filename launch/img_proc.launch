<?xml version="1.0" encoding="utf-8"?>
<launch>
  <arg name="bagname" default="one_way"/>
  <arg name="bagfile" default="/home/erl/jinzhao/OrcVIO/rosbag/raw/$(arg bagname).bag" />
  <arg name="outdata_dir" default="/home/erl/jinzhao/OrcVIO/rosbag/proc" />

  <arg name="record_rosbag" default="true" />
  <arg name="input_image_topic" default="/camera/image_raw" />

  <node name="republish" type="republish" pkg="image_transport" output="screen" args="compressed in:=/camera/infra1/image_rect_raw raw out:=/camera/image_raw" />

  <node pkg="rosbag" type="play" name="rosbag"
        args="--clock $(arg bagfile)"
        required="true"
        />


  <node pkg="rosbag" type="record" name="bag_record"
    args=" -o $(arg outdata_dir)/$(arg bagname)
              /camera/infra1/camera_info
              /camera/image_raw
              /camera/image_color
              /camera/imu
              " />

  <!-- open rviz  -->
  <node type="rviz" name="rviz" pkg="rviz" args="-d $(find starmap)/launch/orcvio_starmap.rviz" />

</launch>
